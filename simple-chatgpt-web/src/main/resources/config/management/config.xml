<?xml version="1.0" encoding="UTF-8" ?>
<config>

    <!-- ========================= -->
    <!-- Regex Validators -->
    <!-- ========================= -->
    <regex id="emailValidation"
           validRegexExpression="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
           errorMessage="wrong email format" />

    <regex id="postalCodeValidation"
           validRegexExpression="^\d{5}(?:[-\s]\d{4})?$"
           errorMessage="wrong postal code format" />

    <!-- 
        Password rules:
        - Min length: 8
        - At least 1 uppercase, 1 lowercase, 1 digit, 1 special char
        - No whitespace
    -->
    <regex id="passwordValidation"
           validRegexExpression="^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9\s])(?!.*\s).{8,}$"
           errorMessage="wrong password format" />

    <!-- ========================= -->
    <!-- User Management -->
    <!-- ========================= -->

	<actions id="search-user-actions">
    	<action name="Create" label="Create" visible="true" jsMethod="addUser" />
    	<action name="Search" label="Search" visible="true" jsMethod="searchUsers" />
    	<action name="Reset" label="Reset" visible="true" jsMethod="resetSearch" />
	</actions>
	
    <form id="searchUser">
        <field name="userName" label="Username" visible="true" />
        <field name="userKey" label="User Key" visible="true" />
        <field name="firstName" label="First Name" visible="true" />
        <field name="lastName" label="Last Name" visible="true" />
        <field name="email" label="Email" regex="emailValidation" visible="true" />
        <field name="addressLine1" label="Address Line 1" visible="true" />
        <field name="addressLine2" label="Address Line 2" visible="true" />
        <field name="city" label="City" visible="true" />
        <field name="state" label="State" visible="true" />
        <field name="postCode" label="Post Code" regex="postalCodeValidation" visible="true" />
        <field name="country" label="Country" visible="true" />
    </form>
    <actions id="user-actions">
        <action name="Edit" label="Edit" visible="true" jsMethod="editUser" />
        <action name="Delete" label="Delete" visible="true" jsMethod="deleteUser" />
    </actions>

    <grid id="users">
        <column name="id" label="ID" visible="true" sortable="true" dbField="id" />
        <column name="userName" label="Username" visible="true" sortable="true" dbField="user_name" />
        <column name="userKey" label="User Key" visible="false" sortable="true" dbField="user_key" />
        <column name="firstName" label="First Name" visible="true" sortable="true" dbField="first_name" />
        <column name="lastName" label="Last Name" visible="true" sortable="true" dbField="last_name" />
        <column name="email" label="Email" visible="true" sortable="true" dbField="email" />
        <column name="city" label="City" visible="false" sortable="true" dbField="city" />
        <column name="country" label="Country" visible="false" sortable="true" dbField="country" />
        <column name="createdAt" label="Created At" visible="false" sortable="true" dbField="created_at" />
        <column name="updatedAt" label="Updated At" visible="false" sortable="true" dbField="updated_at" />
        <column name="actions" label="Actions" actions="user-actions" visible="true" sortable="false" />
    </grid>
    
	<actions id="user-form-actions">
    	<action name="Save" label="Save" visible="true" jsMethod="saveUser" />
    	<action name="Cancel" label="Cancel" visible="true" jsMethod="navigateToUsers" />
	</actions>

    <form id="addUser">
        <field name="userName" label="Username" visible="true" required="true" editable="true" />
        <field name="userKey" label="User Key" visible="true" required="true" editable="true" />
        <field name="firstName" label="First Name" visible="true" required="true" editable="true" />
        <field name="lastName" label="Last Name" visible="true" required="true" editable="true" />
        <field name="email" label="Email" regex="emailValidation" visible="true" required="true" editable="true" />
        <field name="password" label="Password" regex="passwordValidation" visible="true" required="true" editable="true" />
        <field name="addressLine1" label="Address Line 1" visible="true" editable="true" />
        <field name="addressLine2" label="Address Line 2" visible="true" editable="true" />
        <field name="city" label="City" visible="true" editable="true" />
        <field name="state" label="State" visible="true" editable="true" />
        <field name="postCode" label="Post Code" regex="postalCodeValidation" visible="true" editable="true" />
        <field name="country" label="Country" visible="true" editable="true" />
    </form>

    <form id="editUser">
        <field name="id" label="ID" visible="true" required="true" editable="false" />
        <field name="userName" label="Username" visible="true" required="true" editable="true" />
        <field name="userKey" label="User Key" visible="true" required="true" editable="true" />
        <field name="firstName" label="First Name" visible="true" required="true" editable="true" />
        <field name="lastName" label="Last Name" visible="true" required="true" editable="true" />
        <field name="email" label="Email" regex="emailValidation" visible="true" required="true" editable="true" />
        <field name="password" label="Password" regex="passwordValidation" visible="true" required="true" editable="true" />
        <field name="addressLine1" label="Address Line 1" visible="true" editable="true" />
        <field name="addressLine2" label="Address Line 2" visible="true" editable="true" />
        <field name="city" label="City" visible="true" editable="true" />
        <field name="state" label="State" visible="true" editable="true" />
        <field name="postCode" label="Post Code" regex="postalCodeValidation" visible="true" editable="true" />
        <field name="country" label="Country" visible="true" editable="true" />
        <field name="createdAt" label="Created At" visible="true" editable="false" />
        <field name="updatedAt" label="Updated At" visible="true" editable="false" />
    </form>

    <!-- ========================= -->
    <!-- Property Management -->
    <!-- ========================= -->

	<actions id="search-property-actions">
    	<action name="Create" label="Create" visible="true" jsMethod="addProperty" />
    	<action name="Search" label="Search" visible="true" jsMethod="searchProperties" />
    	<action name="Reset" label="Reset" visible="true" jsMethod="resetSearch" />
	</actions>
	
    <form id="searchProperty">
        <field name="propertyName" label="Name" visible="true" required="true" editable="true" />
        <field name="propertyKey" label="Key" visible="false" required="true" editable="true" />
        <field name="type" label="Type" visible="true" required="true" editable="true" />
    </form>

    <validators id="multiple-validators">
        <validator type="boolean" validRegexExpression="^(true|false)$" errorMessage="wrong boolean format" />
        <validator type="integer" validRegexExpression="^\d+$" errorMessage="wrong integer format" />
        <validator type="decimal" validRegexExpression="^[+-]?\d*\.?\d+$" errorMessage="wrong decimal format" />
        <validator type="string" validRegexExpression=".*" errorMessage="wrong string format" />
    </validators>
        
    <actions id="property-actions">
        <action name="Edit" label="Edit" visible="true" jsMethod="editProperty" />
    </actions>

    <grid id="properties">
        <column name="id" label="ID" visible="true" sortable="true" dbField="id" />
        <column name="propertyName" label="Name" visible="true" sortable="true" dbField="property_name" />
        <column name="propertyKey" label="Key" visible="false" sortable="true" dbField="property_key" />
        <column name="type" label="Type" visible="true" sortable="true" dbField="type" />
        <column name="value" label="Value" visible="true" sortable="true" dbField="value" />
        <column name="actions" label="Actions" actions="property-actions" visible="true" sortable="false" />
    </grid>

	<actions id="property-form-actions">
    	<action name="Save" label="Save" visible="true" jsMethod="saveProperty" />
    	<action name="Cancel" label="Cancel" visible="true" jsMethod="navigateToProperties" />
	</actions>
	
    <form id="editProperty">
        <field name="id" label="ID" visible="true" required="true" editable="false" />
        <field name="propertyName" label="Name" visible="true" required="true" editable="false" />
        <field name="propertyKey" label="Key" visible="false" required="true" editable="false" />
        <field name="type" label="Type" visible="true" required="true" editable="true" />
        <field name="value" label="Value" visible="true" required="true" editable="true" validators="multiple-validators" />
    </form>

    <!-- ========================= -->
    <!-- User List Management -->
    <!-- ========================= -->

	<actions id="search-userList-actions">
    	<action name="Upload" label="Upload" visible="true" jsMethod="uploadUserList" />
    	<action name="DownLoadSample" label="DownLoad Sample" visible="true" jsMethod="downloadSampleUserList" />
    	<action name="Search" label="Search" visible="true" jsMethod="searchUserLists" />
    	<action name="Reset" label="Reset" visible="true" jsMethod="resetSearch" />
	</actions>
	
    <form id="searchUserList">
        <field name="userListName" label="User List Name" visible="true" />
        <field name="originalFileName" label="Original File Name" visible="true" />
        <field name="description" label="Description" visible="true" />
    </form>
    
    <actions id="userList-actions">
        <action name="Edit" label="Edit" visible="true" jsMethod="editUserList" />
        <action name="ExportCSVUserList" label="Export CSV" visible="true" jsMethod="exportCSVUserList" />
        <action name="ExportExcelUserList" label="Export Excel" visible="true" jsMethod="exportExcelUserList" />
        <action name="Delete" label="Delete" visible="true" jsMethod="deleteUserList" />
    </actions>

    <grid id="userLists">
        <column name="id" label="ID" visible="true" sortable="true" dbField="id" />
        <column name="userListName" label="User List Name" visible="true" sortable="true" dbField="user_list_name" />
        <column name="originalFileName" label="Original File Name" visible="true" sortable="true" dbField="original_file_name" />
        <column name="description" label="Description" visible="true" sortable="true" dbField="description" />
        <column name="actions" label="Actions" actions="userList-actions" visible="true" sortable="false" />
    </grid>
    
 	<actions id="userList-form-actions">
    	<action name="Save" label="Save" visible="true" jsMethod="saveUserList" />
    	<action name="Cancel" label="Cancel" visible="true" jsMethod="navigateToUserLists" />
	</actions>
    
    <form id="editUserList">
        <field name="id" label="ID" required="true" editable="false" />
        <field name="userListName" label="User List Name" required="true" editable="false" />
        <field name="originalFileName" label="Original File Name" required="true" editable="false" />
        <field name="description" label="Description" required="true" editable="false" />
    </form>

    <actions id="userListMember-actions">
        <action name="Edit" label="Edit" visible="true" jsMethod="editUserListMember" />
        <action name="Delete" label="Delete" visible="true" jsMethod="deleteUserListMember" />
    </actions>
    
	<actions id="search-userListMember-actions">
    	<action name="Create" label="Create" visible="true" jsMethod="addUserListMember" />
    	<action name="Search" label="Search" visible="true" jsMethod="searchUserListMembers" />
    	<action name="Reset" label="Reset" visible="true" jsMethod="resetSearch" />
	</actions>
	
    <form id="searchUserListMember">
        <field name="userName" label="Username" visible="true" />
        <field name="userKey" label="User Key" visible="true" />
        <field name="firstName" label="First Name" visible="true" />
        <field name="lastName" label="Last Name" visible="true" />
        <field name="email" label="Email" regex="emailValidation" visible="true" />
        <field name="addressLine1" label="Address Line 1" visible="true" />
        <field name="addressLine2" label="Address Line 2" visible="true" />
        <field name="city" label="City" visible="true" />
        <field name="state" label="State" visible="true" />
        <field name="postCode" label="Post Code" regex="postalCodeValidation" visible="true" />
        <field name="country" label="Country" visible="true" />
    </form>

    <grid id="userListMembers">
        <column name="id" label="ID" visible="true" sortable="true" dbField="id" />
        <column name="listId" label="List ID" visible="true" sortable="true" dbField="list_id" />
        <column name="userName" label="Username" visible="true" sortable="true" dbField="user_name" />
        <column name="userKey" label="User Key" visible="false" sortable="true" dbField="user_key" />
        <column name="firstName" label="First Name" visible="true" sortable="true" dbField="first_name" />
        <column name="lastName" label="Last Name" visible="true" sortable="true" dbField="last_name" />
        <column name="email" label="Email" visible="true" sortable="true" dbField="email" />
        <column name="city" label="City" visible="false" sortable="true" dbField="city" />
        <column name="country" label="Country" visible="false" sortable="true" dbField="country" />
        <column name="createdAt" label="Created At" visible="false" sortable="true" dbField="created_at" />
        <column name="updatedAt" label="Updated At" visible="false" sortable="true" dbField="updated_at" />
        <column name="actions" label="Actions" actions="userListMember-actions" visible="true" sortable="false" />
    </grid>

	<actions id="userListMember-form-actions">
    	<action name="Save" label="Save" visible="true" jsMethod="saveUserListMember" />
    	<action name="Cancel" label="Cancel" visible="true" jsMethod="navigateToMembers" />
	</actions>
	
    <form id="addUserListMember">
        <field name="userName" label="Username" required="true" editable="true" />
        <field name="userKey" label="User Key" required="true" editable="true" />
        <field name="firstName" label="First Name" required="true" editable="true" />
        <field name="lastName" label="Last Name" required="true" editable="true" />
        <field name="email" label="Email" regex="emailValidation" required="true" editable="true" />
        <field name="password" label="Password" regex="passwordValidation" required="true" editable="true" />
        <field name="addressLine1" label="Address Line 1" editable="true" />
        <field name="addressLine2" label="Address Line 2" editable="true" />
        <field name="city" label="City" editable="true" />
        <field name="state" label="State" editable="true" />
        <field name="postCode" label="Post Code" regex="postalCodeValidation" editable="true" />
        <field name="country" label="Country" editable="true" />
    </form>

    <form id="editUserListMember">
        <field name="id" label="ID" required="true" editable="false" />
        <field name="userName" label="Username" required="true" editable="true" />
        <field name="userKey" label="User Key" required="true" editable="true" />
        <field name="firstName" label="First Name" required="true" editable="true" />
        <field name="lastName" label="Last Name" required="true" editable="true" />
        <field name="email" label="Email" regex="emailValidation" required="true" editable="true" />
        <field name="password" label="Password" regex="passwordValidation" required="true" editable="true" />
        <field name="addressLine1" label="Address Line 1" editable="true" />
        <field name="addressLine2" label="Address Line 2" editable="true" />
        <field name="city" label="City" editable="true" />
        <field name="state" label="State" editable="true" />
        <field name="postCode" label="Post Code" regex="postalCodeValidation" editable="true" />
        <field name="country" label="Country" editable="true" />
        <field name="createdAt" label="Created At" editable="false" />
        <field name="updatedAt" label="Updated At" editable="false" />
    </form>

</config>